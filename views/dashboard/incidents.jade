include ../kanban_menu
include mixins/chart_incident
// Load d3.js and c3.js
script(src='/javascripts/components/c3/c3.min.js')
// Load nv3d
script(src='/javascripts/components/nvd3/build/nv.d3.min.js')
script(src='/javascripts/dashboards/nvd3_incidents_multi.js')


style.
	#chartTest svg {
	  height: 400px;
		width:980px;
	}
	#chart2 svg {
	  height: 400px;
		width:980px;
	}
	#chartP8 svg {
	  height: 400px;
		width:980px;
	}
	#chartP1 svg {
	  height: 400px;
		width:980px;
	}

block content
	//+graph("test","chartTest")
	+chartIncident("P1","chartP1")
	+chartIncident("P8","chartP8")


include ../includes/material			

script.
	$('a.dropdown').click( function(event) {
		var _prio =event.target.id.split("_")[0].split("chart")[1];
		var _chart=event.target.id.split("_")[0];
		if (_.startsWith(event.target.id.split("_")[1],"aggregate")){
			_aggregate =event.target.id.split("_")[1].split("-")[1];
		}
		else
		{
			_period = event.target.id.split("_")[1];
		}
		$("#period_"+_chart).text(_period);
		$("#aggregate_"+_chart).text(_aggregate);
		redraw(_chart,_period,_aggregate,_prio);
	});
